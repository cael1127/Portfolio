{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Auto-scaling EC2 group with Load Balancer",
  "Resources": {
    "WebServerGroup": {
      "Type": "AWS::AutoScaling::AutoScalingGroup",
      "Properties": {
        "MinSize": "2",
        "MaxSize": "5",
        "DesiredCapacity": "2",
        "VPCZoneIdentifier": ["subnet-12345678"],
        "LaunchConfigurationName": { "Ref": "LaunchConfig" }
      }
    },
    "LaunchConfig": {
      "Type": "AWS::AutoScaling::LaunchConfiguration",
      "Properties": {
        "ImageId": "ami-0abcdef1234567890",
        "InstanceType": "t2.micro",
        "SecurityGroups": ["sg-12345678"]
      }
    },
    "LoadBalancer": {
      "Type": "AWS::ElasticLoadBalancing::LoadBalancer",
      "Properties": {
        "Listeners": [
          {
            "LoadBalancerPort": "80",
            "InstancePort": "80",
            "Protocol": "HTTP"
          }
        ],
        "HealthCheck": {
          "Target": "HTTP:80/",
          "HealthyThreshold": "3",
          "UnhealthyThreshold": "5",
          "Interval": "30",
          "Timeout": "5"
        },
        "Subnets": ["subnet-12345678"]
      }
    }
  }
} 